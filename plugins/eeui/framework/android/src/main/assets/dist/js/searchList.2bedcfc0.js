(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["searchList"],{1146:function(e,t,a){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"366b":function(e,t,a){},"83f5":function(e,t,a){},"841c":function(e,t,a){"use strict";var l=a("d784"),n=a("825a"),r=a("1d80"),i=a("129f"),c=a("577e"),o=a("14c3");l("search",(function(e,t,a){return[function(t){var a=r(this),l=void 0==t?void 0:t[e];return void 0!==l?l.call(t,a):new RegExp(t)[e](c(a))},function(e){var l=n(this),r=c(e),u=a(t,l,r);if(u.done)return u.value;var s=l.lastIndex;i(s,0)||(l.lastIndex=0);var d=o(l,r);return i(l.lastIndex,s)||(l.lastIndex=s),null===d?-1:d.index}]}))},"8c1a":function(e,t,a){"use strict";a.r(t);a("da3c");var l=a("0b33"),n=(a("bda7"),a("5e46")),r=(a("68ef"),a("cb51"),a("3743"),a("1a04"),a("1146"),a("f032"),a("c199")),i=a("7a23"),c=a("d282"),o=a("db17"),u=a("1325"),s=a("b1d2"),d=a("8da3"),b=a("482d"),v=a("a8c1"),f=a("ea8e");function O(e){return Array.isArray(e)?!e.length:0!==e&&!e}function j(e,t){return(!t.required||!O(e))&&!(t.pattern&&!t.pattern.test(String(e)))}function g(e,t){return new Promise(a=>{var l=t.validator(e,t);if(Object(d["f"])(l))return l.then(a);a(l)})}function p(e,t){var{message:a}=t;return Object(d["b"])(a)?a(e,t):a||""}function m(e){e.target.composing=!0}function h(e){var{target:t}=e;t.composing&&(t.composing=!1,Object(u["b"])(t,"input"))}function y(e,t){var a=Object(v["b"])();e.style.height="auto";var l=e.scrollHeight;if(Object(d["e"])(t)){var{maxHeight:n,minHeight:r}=t;void 0!==n&&(l=Math.min(l,n)),void 0!==r&&(l=Math.max(l,r))}l&&(e.style.height=l+"px",Object(v["g"])(a))}function x(e){return"number"===e?{type:"text",inputmode:"decimal"}:"digit"===e?{type:"tel",inputmode:"numeric"}:{type:e}}var k=a("68b4"),w=a("6ba6"),S=Symbol("van-field");var C=a("4eda"),I=a("ad06"),V=a("7744"),[H,M]=Object(c["a"])("field"),q={formatter:Function,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:[Number,String],inputAlign:String,placeholder:String,errorMessage:String,error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},clearIcon:{type:String,default:"clear"},modelValue:{type:[Number,String],default:""},clearTrigger:{type:String,default:"focus"},formatTrigger:{type:String,default:"onChange"}},P=Object(o["a"])({},k["a"],q,{rows:[Number,String],name:String,rules:Array,autosize:[Boolean,Object],labelWidth:[Number,String],labelClass:o["g"],labelAlign:String,autocomplete:String,showWordLimit:Boolean,errorMessageAlign:String,type:{type:String,default:"text"},colon:{type:Boolean,default:null}}),B=Object(i["m"])({name:H,props:P,emits:["blur","focus","clear","keypress","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(e,{emit:t,slots:a}){var l=Object(i["G"])({focused:!1,validateFailed:!1,validateMessage:""}),n=Object(i["H"])(),r=Object(i["H"])(),{parent:c}=Object(w["a"])(s["c"]),o=()=>{var t;return String(null!=(t=e.modelValue)?t:"")},O=t=>Object(d["a"])(e[t])?e[t]:c&&Object(d["a"])(c.props[t])?c.props[t]:void 0,k=Object(i["d"])(()=>{var t=O("readonly");if(e.clearable&&!t){var a=""!==o(),n="always"===e.clearTrigger||"focus"===e.clearTrigger&&l.focused;return a&&n}return!1}),H=Object(i["d"])(()=>r.value&&a.input?r.value():e.modelValue),q=e=>e.reduce((e,t)=>e.then(()=>{if(!l.validateFailed){var{value:e}=H;return t.formatter&&(e=t.formatter(e,t)),j(e,t)?t.validator?g(e,t).then(a=>{a&&"string"===typeof a?(l.validateFailed=!0,l.validateMessage=a):!1===a&&(l.validateFailed=!0,l.validateMessage=p(e,t))}):void 0:(l.validateFailed=!0,void(l.validateMessage=p(e,t)))}}),Promise.resolve()),P=()=>{l.validateFailed&&(l.validateFailed=!1,l.validateMessage="")},B=(t=e.rules)=>new Promise(a=>{P(),t?q(t).then(()=>{l.validateFailed?a({name:e.name,message:l.validateMessage}):a()}):a()}),A=t=>{if(c&&e.rules){var a=c.props.validateTrigger===t,l=e.rules.filter(e=>e.trigger?e.trigger===t:a);l.length&&B(l)}},F=t=>{var{maxlength:a}=e;if(Object(d["a"])(a)&&t.length>a){var l=o();return l&&l.length===+a?l:t.slice(0,+a)}return t},T=(a,l="onChange")=>{if(a=F(a),"number"===e.type||"digit"===e.type){var r="number"===e.type;a=Object(b["b"])(a,r,r)}e.formatter&&l===e.formatTrigger&&(a=e.formatter(a)),n.value&&n.value.value!==a&&(n.value.value=a),a!==e.modelValue&&t("update:modelValue",a)},E=e=>{e.target.composing||T(e.target.value)},_=()=>{var e;return null==(e=n.value)?void 0:e.blur()},z=()=>{var e;return null==(e=n.value)?void 0:e.focus()},L=e=>{l.focused=!0,t("focus",e);var a=O("readonly");a&&_()},J=e=>{l.focused=!1,T(o(),"onBlur"),t("blur",e),A("onBlur"),Object(v["f"])()},N=e=>t("click-input",e),W=e=>t("click-left-icon",e),R=e=>t("click-right-icon",e),U=e=>{Object(u["a"])(e),t("update:modelValue",""),t("clear",e)},D=Object(i["d"])(()=>"boolean"===typeof e.error?e.error:!!(c&&c.props.showError&&l.validateFailed)||void 0),K=Object(i["d"])(()=>{var e=O("labelWidth");if(e)return{width:Object(f["a"])(e)}}),Q=a=>{var l=13;if(a.keyCode===l){var n=c&&c.props.submitOnEnter;n||"textarea"===e.type||Object(u["a"])(a),"search"===e.type&&_()}t("keypress",a)},G=()=>{var t=n.value;"textarea"===e.type&&e.autosize&&t&&y(t,e.autosize)},X=()=>{var t=M("control",[O("inputAlign"),{error:D.value,custom:!!a.input,"min-height":"textarea"===e.type&&!e.autosize}]);if(a.input)return Object(i["l"])("div",{class:t,onClick:N},[a.input()]);var l={ref:n,name:e.name,rows:void 0!==e.rows?+e.rows:void 0,class:t,value:e.modelValue,disabled:O("disabled"),readonly:O("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,onBlur:J,onFocus:L,onInput:E,onClick:N,onChange:h,onKeypress:Q,onCompositionend:h,onCompositionstart:m};return"textarea"===e.type?Object(i["l"])("textarea",l,null):Object(i["l"])("input",Object(i["s"])(x(e.type),l),null)},Y=()=>{var t=a["left-icon"];if(e.leftIcon||t)return Object(i["l"])("div",{class:M("left-icon"),onClick:W},[t?t():Object(i["l"])(I["a"],{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Z=()=>{var t=a["right-icon"];if(e.rightIcon||t)return Object(i["l"])("div",{class:M("right-icon"),onClick:R},[t?t():Object(i["l"])(I["a"],{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},$=()=>{if(e.showWordLimit&&e.maxlength){var t=o().length;return Object(i["l"])("div",{class:M("word-limit")},[Object(i["l"])("span",{class:M("word-num")},[t]),Object(i["k"])("/"),e.maxlength])}},ee=()=>{if(!c||!1!==c.props.showErrorMessage){var t=e.errorMessage||l.validateMessage;if(t){var a=O("errorMessageAlign");return Object(i["l"])("div",{class:M("error-message",a)},[t])}}},te=()=>{var t=O("colon")?":":"";return a.label?[a.label(),t]:e.label?Object(i["l"])("span",null,[e.label+t]):void 0},ae=()=>[Object(i["l"])("div",{class:M("body")},[X(),k.value&&Object(i["l"])(I["a"],{name:e.clearIcon,class:M("clear"),onTouchstart:U},null),Z(),a.button&&Object(i["l"])("div",{class:M("button")},[a.button()])]),$(),ee()];return Object(C["a"])({blur:_,focus:z,validate:B,formValue:H,resetValidation:P}),Object(i["E"])(S,{customValue:r,resetValidation:P,validateWithTrigger:A}),Object(i["R"])(()=>e.modelValue,()=>{T(o()),P(),A("onChange"),Object(i["t"])(G)}),Object(i["z"])(()=>{T(o(),e.formatTrigger),Object(i["t"])(G)}),()=>{var t=O("disabled"),l=O("labelAlign"),n=te(),r=Y();return Object(i["l"])(V["a"],{size:e.size,icon:e.leftIcon,class:M({disabled:t,["label-"+l]:l}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:K.value,valueClass:M("value"),titleClass:[M("label",[l,{required:e.required}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:r?()=>r:null,title:n?()=>n:null,value:ae,extra:a.extra})}}}),A=Object(r["a"])(B),[F,T,E]=Object(c["a"])("search"),_=Object(o["a"])({},q,{label:String,clearable:o["f"],actionText:String,background:String,showAction:Boolean,shape:{type:String,default:"square"},leftIcon:{type:String,default:"search"}}),z=Object(i["m"])({name:F,props:_,emits:["search","cancel","update:modelValue"],setup(e,{emit:t,slots:a,attrs:l}){var n=Object(i["H"])(),r=()=>{a.action||(t("update:modelValue",""),t("cancel"))},c=a=>{var l=13;a.keyCode===l&&(Object(u["a"])(a),t("search",e.modelValue))},s=()=>{if(a.label||e.label)return Object(i["l"])("div",{class:T("label")},[a.label?a.label():e.label])},d=()=>{if(e.showAction){var t=e.actionText||E("cancel");return Object(i["l"])("div",{class:T("action"),role:"button",tabindex:0,onClick:r},[a.action?a.action():t])}},b=()=>{var e;return null==(e=n.value)?void 0:e.blur()},v=()=>{var e;return null==(e=n.value)?void 0:e.focus()},f=Object.keys(q),O=()=>{var r=Object(o["a"])({},l,Object(o["e"])(e,f)),u=e=>t("update:modelValue",e);return Object(i["l"])(A,Object(i["s"])({ref:n,type:"search",class:T("field"),border:!1,onKeypress:c},r,{"onUpdate:modelValue":u}),Object(o["e"])(a,["left-icon","right-icon"]))};return Object(C["a"])({focus:v,blur:b}),()=>Object(i["l"])("div",{class:T({"show-action":e.showAction}),style:{background:e.background}},[null==a.left?void 0:a.left(),Object(i["l"])("div",{class:T("content",e.shape)},[s(),O()]),d()])}}),L=Object(r["a"])(z),J=L,N=(a("ac1f"),a("841c"),a("2994"),a("2bdd")),W=(a("e7e5"),a("d399")),R=a("2909"),U=(a("d81d"),a("b0c0"),a("a15b"),a("99af"),a("afa4")),D=a("0812"),K=a("d823"),Q=Object(i["m"])({setup:function(e,t){var a=t.expose,l=function(e){var t=e||[],a=t.map((function(e){return e.name}));return a.join(" / ")},n=null;window.requireModuleJs&&(n=window.requireModuleJs("eeui"));var r=Object(i["H"])(null),c=Object(i["H"])([]),o=Object(i["H"])(0),u=Object(i["H"])(""),s=Object(i["H"])(0),d=20,b=Object(i["H"])(!1),v=Object(U["d"])(),f=v.request,O=v.loading,j=Object(i["d"])((function(){return!0===b.value||o.value*d>s.value})),g=function(){var e={w:u.value,n:d,p:o.value+1};f({params:e}).then((function(e){var t=e.data,a=(null===t||void 0===t?void 0:t.data.song)||{},l=(null===a||void 0===a?void 0:a.list)||[],n=(null===a||void 0===a?void 0:a.totalnum)||0;s.value=n,o.value=o.value+1,c.value=[].concat(Object(R["a"])(c.value),Object(R["a"])(Object(D["b"])(l)))})).catch((function(){b.value=!0}))},p=function(e){u.value=e,o.value=0,c.value=[],g()},m=function(){O.value||""===u.value||(console.log("下一页"),g())},h=function(e){var t=e.albummid?Object(U["a"])(e.albummid,"album"):"";Object(U["c"])(e).then((function(a){var r,i,c,o,u,s,d,b=(null===a||void 0===a||null===(r=a.data)||void 0===r||null===(i=r.req_0)||void 0===i?void 0:i.data)||{},v=null===b||void 0===b||null===(c=b.midurlinfo)||void 0===c||null===(o=c[0])||void 0===o?void 0:o.purl,f=v&&"".concat((null===b||void 0===b||null===(u=b.sip)||void 0===u?void 0:u[0])||"").concat((null===b||void 0===b||null===(s=b.midurlinfo)||void 0===s||null===(d=s[0])||void 0===d?void 0:d.purl)||"");f||W["a"].fail("获取资源失败");var O={pageName:"index",module:"playSong",songUrl:f,songImage:t,singer:l(e.singer),songname:e.songname};null!==n&&n.postMessage(O)}))};return a({search:p}),function(e,t){return Object(i["C"])(),Object(i["h"])("div",{class:"list",ref:r},[Object(i["l"])(Object(i["P"])(N["a"]),{loading:Object(i["P"])(O),onLoad:m,"finished-text":"没有更多了",finished:Object(i["P"])(j)},{default:Object(i["S"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["I"])(c.value,(function(e){return Object(i["C"])(),Object(i["f"])(K["a"],{key:e.songid,song:e,onPlaySong:h},null,8,["song"])})),128))]})),_:1},8,["loading","finished"])],512)}}});a("d0d5");Q.__scopeId="data-v-36414571";var G=Q;function X(e,t){return Object(i["C"])(),Object(i["h"])("div",null," netEase ")}const Y={};Y.render=X;var Z=Y,$=a("71c2"),ee=a("2eaa");Object(i["F"])("data-v-1f2e7044");var te={class:"searchList"},ae={class:"tabs"};Object(i["D"])();var le=Object(i["m"])({setup:function(e){var t=44,a=Object(i["H"])(null),r=Object(i["H"])(0),c=Object(i["H"])(null),o=Object(i["H"])([{title:"QQ音乐",key:"qq"},{title:"网易云",key:"netEase"}]),u=Object(i["H"])(""),s=Object(ee["a"])(),d=s.height,b=Object(i["H"])(0),v=Object(i["d"])((function(){return o.value[r.value].key})),f=Object(i["H"])([v.value]);Object(i["R"])(v,(function(e){-1===f.value.indexOf(e)&&f.value.push(e)}));var O=function(e){c.value&&c.value.search(e)},j=function(e){b.value=e.height},g=Object(i["d"])((function(){return d.value-b.value-t}));return Object(i["z"])((function(){window.requireModuleJs&&(a.value=window.requireModuleJs("eeui"))})),function(e,t){return Object(i["C"])(),Object(i["h"])("div",te,[Object(i["l"])($["a"],{leftIcon:"arrow-left","title-hide":!0,onRectChange:j},{default:Object(i["S"])((function(){return[Object(i["l"])(Object(i["P"])(J),{shape:"round",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return u.value=e}),placeholder:"请输入搜索关键词",onSearch:O},null,8,["modelValue"])]})),_:1}),Object(i["i"])("div",ae,[Object(i["l"])(Object(i["P"])(n["a"]),{active:r.value,"onUpdate:active":t[1]||(t[1]=function(e){return r.value=e}),sticky:"","offset-top":b.value,animated:""},{default:Object(i["S"])((function(){return[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["I"])(o.value,(function(e){return Object(i["C"])(),Object(i["f"])(Object(i["P"])(l["a"]),{key:e.key,title:e.title},{default:Object(i["S"])((function(){return[Object(i["i"])("div",{style:Object(i["u"])({height:"".concat(Object(i["P"])(g),"px")}),class:"listBox"},[-1!==f.value.indexOf("qq")&&"qq"===e.key?(Object(i["C"])(),Object(i["f"])(G,{key:0,ref:c},null,512)):Object(i["g"])("",!0),-1!==f.value.indexOf("netEase")&&"netEase"===e.key?(Object(i["C"])(),Object(i["f"])(Z,{key:1})):Object(i["g"])("",!0)],4)]})),_:2},1032,["title"])})),128))]})),_:1},8,["active","offset-top"])])])}}});a("be93");le.__scopeId="data-v-1f2e7044";t["default"]=le},be93:function(e,t,a){"use strict";a("366b")},d0d5:function(e,t,a){"use strict";a("83f5")},f032:function(e,t,a){}}]);
//# sourceMappingURL=searchList.2bedcfc0.js.map
(function(e){function t(t){for(var n,a,u=t[0],o=t[1],s=t[2],f=0,l=[];f<u.length;f++)a=u[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);m&&m(t);while(l.length)l.shift()();return i.push.apply(i,s||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var u=r[a];0!==c[u]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},c={app:0},i=[];function u(e){return o.p+"js/"+({musicList:"musicList"}[e]||e)+"."+{musicList:"6a0c1da3"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r={musicList:1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({musicList:"musicList"}[e]||e)+"."+{musicList:"2f3d1a3c"}[e]+".css",c=o.p+n,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var s=i[u],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===n||f===c))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],f=s.getAttribute("data-href");if(f===n||f===c)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||c,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete a[e],m.parentNode.removeChild(m),r(i)},m.href=c;var d=document.getElementsByTagName("head")[0];d.appendChild(m)})).then((function(){a[e]=0})));var n=c[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,r){n=c[e]=[t,r]}));t.push(n[2]=i);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,o.nc&&f.setAttribute("nonce",o.nc),f.src=u(e);var l=new Error;s=function(t){f.onerror=f.onload=null,clearTimeout(m);var r=c[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",l.name="ChunkLoadError",l.type=n,l.request=a,r[1](l)}c[e]=void 0}};var m=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var m=f;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"002f":function(e,t,r){"use strict";r.r(t),r.d(t,"Decrypt",(function(){return f}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fb6a"),r("3ca3"),r("ddb0"),r("2b3d"),r("06dc")),c=r("fd2f"),i=r("cb96"),u=[105,102,109,116],o=[254,254,254,254],s={" WAV":".wav",FLAC:".flac"," MP3":".mp3"," A4M":".m4a"};function f(e,t,r){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var f,l,m,d,b,p,h,g,v,x,y,w,k,O;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,Object(a["d"])(t);case 3:if(e.t1=e.sent,f=new e.t0(e.t1),Object(a["i"])(u,f.slice(0,4))&&Object(a["i"])(o,f.slice(8,12))){e.next=13;break}if("xm"!==n){e.next=10;break}return e.abrupt("return",{status:!1,message:"此xm文件已损坏"});case 10:return e.next=12,Object(c["Decrypt"])(t,r,n,!0);case 12:return e.abrupt("return",e.sent);case 13:if(l=(new TextDecoder).decode(f.slice(4,8)),s.hasOwnProperty(l)){e.next=16;break}return e.abrupt("return",{status:!1,message:"未知的xm文件类型"});case 16:for(m=f[15],d=f[12]|f[13]<<8|f[14]<<16,b=f.slice(16),p=b.length,h=d;h<p;++h)b[h]=b[h]-m^255;return g=s[l],v=a["a"][g],x=new Blob([b],{type:v}),e.next=26,i.parseBlob(x);case 26:return y=e.sent,"wav"===g&&(console.log(y.common),y.common.album="",y.common.artist="",y.common.title=""),w=-1===r.indexOf("_")?"-":"_",k=Object(a["e"])(y.common.artist,y.common.title,r,w),O=Object(a["f"])(y),e.abrupt("return",{status:!0,title:k.title,artist:k.artist,ext:g,album:y.common.album,picture:O,file:URL.createObjectURL(x),mime:v,rawExt:"xm"});case 32:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},"06dc":function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"j",(function(){return u})),r.d(t,"a",(function(){return l})),r.d(t,"h",(function(){return m})),r.d(t,"d",(function(){return d})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"i",(function(){return g})),r.d(t,"b",(function(){return v})),r.d(t,"g",(function(){return x})),r.d(t,"k",(function(){return w}));var n=r("1da1"),a=(r("96cf"),r("ac1f"),r("1276"),r("498a"),r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("fb6a"),r("2ca0"),r("159b"),r("7907")),c=(r("cb96"),[102,76,97,67]),i=[73,68,51],u=[79,103,103,83],o=[102,116,121,112],s=[48,38,178,117,142,102,207,17,166,217,0,170,0,98,206,108],f=[82,73,70,70],l={mp3:"audio/mpeg",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",wma:"audio/x-ms-wma",wav:"audio/x-wav"},m="https://stats.ixarea.com/apis";function d(e){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function p(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-",a="",c="",i=r.split(n);return i.length>1?(a=i[0].trim(),c=i[1].trim()):1===i.length&&(c=i[0].trim()),"string"==typeof e&&""!==e&&(a=e),"string"==typeof t&&""!==t&&(c=t),{artist:a,title:c}}function h(e){var t="";if(void 0!==e.common.picture&&e.common.picture.length>0){var r=new Blob([e.common.picture[0].data],{type:e.common.picture[0].format});t=URL.createObjectURL(r)}return t}function g(e,t){return e.every((function(e,r){return e===t[r]}))}function v(e,t){return g(i,e.slice(0,i.length))?"mp3":g(c,e.slice(0,c.length))?"flac":g(u,e.slice(0,u.length))?"ogg":g(o,e.slice(4,4+o.length))?"m4a":g(s,e.slice(0,s.length))?"wma":g(f,e.slice(0,f.length))?"wav":t}function x(e){return y.apply(this,arguments)}function y(){return y=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:if(r=e.sent,n=r.headers.get("Content-Type"),!n.startsWith("image/")){e.next=12;break}return e.next=8,r.arrayBuffer();case 8:return a=e.sent,c=new Blob([a],{type:n}),i=URL.createObjectURL(c),e.abrupt("return",{buffer:a,src:t,url:i,type:n});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](0);case 16:return e.abrupt("return",{buffer:null,src:t,url:"",type:""});case 17:case"end":return e.stop()}}),e,null,[[0,14]])}))),y.apply(this,arguments)}function w(e,t,r,n){return k.apply(this,arguments)}function k(){return k=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n,c){var i,u,o,s,f,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=l.length>4&&void 0!==l[4]?l[4]:null,u=l.length>5&&void 0!==l[5]?l[5]:"Cover",o=l.length>6&&void 0!==l[6]?l[6]:null,s=new a(t),null!==o&&(r=o.common.artists||r,n=o.common.title||n,c=o.common.album||c,f=o.native["ID3v2.4"]||o.native["ID3v2.3"]||o.native["ID3v2.2"]||[],f.forEach((function(e){if("TPE1"!==e.id&&"TIT2"!==e.id&&"TALB"!==e.id)try{s.setFrame(e.id,e.value)}catch(t){}}))),s.setFrame("TPE1",r).setFrame("TIT2",n).setFrame("TALB",c),null!==i&&s.setFrame("APIC",{type:3,data:i,description:u}),s.addTag(),e.abrupt("return",s.arrayBuffer);case 9:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}},1:function(e,t){},10:function(e,t){},1026:function(e,t,r){"use strict";r("ba14")},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},"93f8":function(e,t,r){"use strict";r("b02f")},9603:function(e,t,r){"use strict";r.d(t,"d",(function(){return m})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return b})),r.d(t,"a",(function(){return p}));var n=r("d4ec"),a=r("bee2"),c=(r("99af"),r("fb6a"),r("159b"),r("06dc")),i=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255,1,30,1,118,111,114,98,105,115,0,0,0,0,2,68,172,0,0,0,0,0,0,0,238,2,0,0,0,0,0,184,1,79,103,103,83,0,0,0,0,0,0,0,0,0,0,255,255,255,255,1,0,0,0,255,255,255,255],u=[3,118,111,114,98,105,115,44,0,0,0,88,105,112,104,46,79,114,103,32,108,105,98,86,111,114,98,105,115,32,73,32,50,48,49,53,48,49,48,53,32,40,226,155,132,226,155,132,226,155,132,226,155,132,41,255,0,0,0,255,0,0,0,84,73,84,76,69,61],o=[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,3,3,3,6,6,6,6,3,3,3,3,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0],s=[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,0,1,3,3,3,3,3,3,3,3],f=[222,81,250,195,74,214,202,144,126,103,94,247,213,82,132,216,71,149,187,161,170,198,102,35,146,98,243,116,161,159,244,160,29,63,91,240,19,14,9,61,249,188,0,17],l=function(){function e(t,r,a){Object(n["a"])(this,e),void 0===r||void 0===a?(44===t.length?(this.Matrix44=t,this.generateMask128from44()):(this.Matrix128=t,this.generateMask44from128()),this.generateMask58from128()):(this.Matrix58=t,this.Super58A=r,this.Super58B=a,this.generateMask128from58(),this.generateMask44from128())}return Object(a["a"])(e,[{key:"generateMask128from58",value:function(){if(56!==this.Matrix58.length)throw"incorrect mask58 matrix length";for(var e=[],t=0;t<8;t+=1)e=e.concat([this.Super58A],this.Matrix58.slice(7*t,7*t+7),[this.Super58B],this.Matrix58.slice(49-7*t,56-7*t).reverse());this.Matrix128=e}},{key:"generateMask58from128",value:function(){if(128!==this.Matrix128.length)throw"incorrect mask128 length";for(var e=this.Matrix128[0],t=this.Matrix128[8],r=[],n=0;n<8;n+=1){var a=16*n,i=120-a;if(this.Matrix128[a]!==e||this.Matrix128[a+8]!==t)throw"decode mask-128 to mask-58 failed";var u=this.Matrix128.slice(a+1,a+8),o=this.Matrix128.slice(i+1,i+8).reverse();if(!Object(c["i"])(u,o))throw"decode mask-128 to mask-58 failed";r=r.concat(u)}this.Matrix58=r,this.Super58A=e,this.Super58B=t}},{key:"generateMask44from128",value:function(){var e=this;if(128!==this.Matrix128.length)throw"incorrect mask128 matrix length";var t=x();this.Matrix44=[];var r=0;t.forEach((function(t){for(var n=t.length,a=1;a<n;a++)if(e.Matrix128[t[0]]!==e.Matrix128[t[a]])throw"decode mask-128 to mask-44 failed";e.Matrix44[r]=e.Matrix128[t[0]],r++}))}},{key:"generateMask128from44",value:function(){var e=this;if(44!==this.Matrix44.length)throw"incorrect mask length";this.Matrix128=[];var t=0;x().forEach((function(r){r.forEach((function(r){e.Matrix128[r]=e.Matrix44[t]})),t++}))}},{key:"Decrypt",value:function(e){for(var t=e.slice(0),r=-1,n=-1,a=0;a<e.length;a++)r++,n++,(32768===r||r>32768&&(r+1)%32768===0)&&(r++,n++),n>=128&&(n-=128),t[a]^=this.Matrix128[n];return t}}]),e}();function m(){return new l(f)}function d(e){for(var t,r=Math.min(32768,e.length),n=0;n<r;n+=128)try{if(t=new l(e.slice(n,n+128)),Object(c["i"])(c["c"],t.Decrypt(e.slice(0,c["c"].length))))break}catch(a){}return t}function b(e){if(!(e.length<256)){for(var t={},r=0;r<44;r++)t[r]={};for(var n=e[84]^e[12]^i[12],a=w(n),u=k(n),o=0;o<a.length;o++)if(0!==u[o]){var s=y(o),f=e[o]^a[o],m=u[o];f in t[s]?t[s][f]+=m:t[s][f]=m}var d=[];try{for(var b=0;b<44;b++)d[b]=h(t[b])}catch(v){return}var p=new l(d),g=p.Decrypt(e.slice(0,c["j"].length));if(Object(c["i"])(c["j"],g))return p}}function p(e,t,r){return new l(e,t,r)}function h(e){if(0===e.length)throw"can not match at least one key";e.length>1&&console.warn("There are 2 potential value for the mask!");var t,r=0;for(var n in e)e[n]>r&&(t=n,r=e[n]);return parseInt(t)}var g=[],v=[];function x(){return g}function y(e){return v[e%128]}function w(e){for(var t=[e,255],r=2;r<e;r++)t.push(255);return t.push(255),i.concat(t,u)}function k(e){for(var t=[6,0],r=2;r<e;r++)t.push(4);return t.push(0),o.concat(t,s)}(function(){for(var e=0;e<128;e++){var t=(e*e+27)%256;t in g?g[t].push(e):g[t]=[e]}var r=0;g.forEach((function(e){e.forEach((function(e){v[e]=r})),r++}))})()},a8ee:function(e,t,r){"use strict";r.r(t),r.d(t,"Decrypt",(function(){return u}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fd2f")),c=r("06dc"),i=[0,0,0,32,102,116,121,112];function u(e,t){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,u,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["d"])(t);case 2:for(n=e.sent,u=new Uint8Array(n),o=0;o<8;++o)u[o]=i[o];return s=new Blob([u],{type:"audio/mp4"}),e.next=8,Object(a["Decrypt"])(s,r,"m4a",!1);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}},b02f:function(e,t,r){},b57b:function(e,t,r){"use strict";r.r(t),r.d(t,"Decrypt",(function(){return o}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("25f0"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fb6a"),r("843c"),r("3ca3"),r("ddb0"),r("2b3d"),r("06dc")),c=r("cb96"),i=[121,101,101,108,105,111,110,45,107,117,119,111,45,116,109,101],u="MoOtOiTvINGwd2E6n0E1i7L5t2IoOoNk";function o(e,t,r){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var u,o,s,l,m,d,b,p,h,g,v,x;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,Object(a["d"])(t);case 3:if(e.t1=e.sent,u=new e.t0(e.t1),Object(a["i"])(i,u.slice(0,16))){e.next=7;break}return e.abrupt("return",{status:!1,message:"Not a valid kwm file!"});case 7:for(o=u.slice(24,32),s=f(o),l=u.slice(1024),m=l.length,d=0;d<m;++d)l[d]^=s[d%32];return b=Object(a["b"])(l,"mp3"),p=a["a"][b],h=new Blob([l],{type:p}),e.next=17,c.parseBlob(h);case 17:return g=e.sent,v=Object(a["e"])(g.common.artist,g.common.title,r),x=Object(a["f"])(g),e.abrupt("return",{status:!0,title:v.title,artist:v.artist,ext:b,album:g.common.album,picture:x,file:URL.createObjectURL(h),mime:p});case 21:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function f(e){for(var t=new DataView(e.buffer),r=t.getBigUint64(0,!0).toString(),n=l(r),a=new Uint8Array(32),c=0;c<32;c++)a[c]=u[c].charCodeAt()^n[c].charCodeAt();return a}function l(e){var t=e.length,r=e;return t>32?r=e.slice(0,32):t<32&&(r=e.padEnd(32,e)),r}},b6cf:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"Decrypt",(function(){return m}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fb6a"),r("ac1f"),r("1276"),r("3ca3"),r("ddb0"),r("2b3d"),r("06dc")),c=r("9603"),i=r("1fb5"),u=r("b686"),o=(r("7907"),r("acf9")),s=o.decode,f=r("cb96"),l={mgg:{handler:c["c"],ext:"ogg",detect:!0},mflac:{handler:c["b"],ext:"flac",detect:!0},qmc0:{handler:c["d"],ext:"mp3",detect:!1},qmc2:{handler:c["d"],ext:"ogg",detect:!1},qmc3:{handler:c["d"],ext:"mp3",detect:!1},qmcogg:{handler:c["d"],ext:"ogg",detect:!1},qmcflac:{handler:c["d"],ext:"flac",detect:!1},bkcmp3:{handler:c["d"],ext:"mp3",detect:!1},bkcflac:{handler:c["d"],ext:"flac",detect:!1},tkm:{handler:c["d"],ext:"m4a",detect:!1},"666c6163":{handler:c["d"],ext:"flac",detect:!1},"6d7033":{handler:c["d"],ext:"mp3",detect:!1},"6f6767":{handler:c["d"],ext:"ogg",detect:!1},"6d3461":{handler:c["d"],ext:"m4a",detect:!1},776176:{handler:c["d"],ext:"wav",detect:!1}};function m(e,t,r){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function t(r,n,c){var i,o,m,d,h,v,x,y,w,k,O,j,A,R,M,U,B;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("qqCommonDecrypt",r),c in l){t.next=3;break}return t.abrupt("return",{status:!1,message:"File type is incorrect!"});case 3:return i=l[c],t.t0=Uint8Array,t.next=7,Object(a["d"])(r);case 7:if(t.t1=t.sent,o=new t.t0(t.t1),!i.detect){t.next=23;break}if(v=new DataView(o.slice(o.length-4).buffer).getUint32(0,!0),x=o.length-4-v,m=o.slice(0,x),d=i.handler(m),h=o.slice(x,x+v),void 0!==d){t.next=19;break}return t.next=18,p(h,n,c);case 18:d=t.sent;case 19:if(void 0!==d){t.next=21;break}return t.abrupt("return",{status:!1,message:c+"格式仅提供实验性支持"});case 21:t.next=25;break;case 23:m=o,d=i.handler(m);case 25:return y=d.Decrypt(m),w=Object(a["b"])(y,i.ext),k=a["a"][w],O=new Blob([y],{type:k}),t.next=31,f.parseBlob(O);case 31:for(A in j=t.sent,j.native)j.native[A].some((function(e){return"TCON"===e.id&&"(12)"===e.value}))&&(console.warn("The metadata is using gbk encoding"),j.common.artist=s(j.common.artist,"gbk"),j.common.title=s(j.common.title,"gbk"),j.common.album=s(j.common.album,"gbk"));if(R=Object(a["e"])(j.common.artist,j.common.title,n),i.detect&&b(h,d.Matrix128,R.artist,R.title,j.common.album,n,c),M=Object(a["f"])(j),""!==M){t.next=60;break}return t.next=39,g(R.artist,R.title,j.common.album);case 39:if(M=t.sent,""===M){t.next=60;break}return t.next=43,Object(a["g"])(M);case 43:if(U=t.sent,""===U.url){t.next=60;break}if(M=U.url,t.prev=46,"mp3"!==w){t.next=54;break}return t.next=50,Object(a["k"])(y,R.artist.split(" _ "),R.title,"",U.buffer,"Cover",j);case 50:y=t.sent,O=new Blob([y],{type:k}),t.next=55;break;case 54:"flac"===w?(B=new u(e.from(y)),B.importPictureFromBuffer(e.from(U.buffer)),y=B.save(),O=new Blob([y],{type:k})):console.info("writing metadata for "+w+" is not being supported for now");case 55:t.next=60;break;case 57:t.prev=57,t.t2=t["catch"](46),console.warn("Error while appending cover image to file "+t.t2);case 60:return t.abrupt("return",{status:!0,title:R.title,artist:R.artist,ext:w,album:j.common.album,picture:M,file:URL.createObjectURL(O),mime:k});case 61:case"end":return t.stop()}}),t,null,[[46,57]])}))),d.apply(this,arguments)}function b(e,t,r,n,c,u,o){fetch(a["h"]+"/qmcmask/usage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Mask:Object(i["fromByteArray"])(new Uint8Array(t)),Key:Object(i["fromByteArray"])(e),Artist:r,Title:n,Album:c,Filename:u,Format:o})}).then().catch()}function p(e,t,r){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var u,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a["h"]+"/qmcmask/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Format:n,Key:Object(i["fromByteArray"])(t),Filename:r,Type:44})});case 3:return u=e.sent,e.next=6,u.json();case 6:return o=e.sent,e.abrupt("return",Object(c["a"])(Object(i["toByteArray"])(o.Matrix44)));case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),h.apply(this,arguments)}function g(e,t,r){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var c,i,u,o,s,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o in c=a["h"]+"/music/qq-cover",e.prev=1,i={Artist:t,Title:r,Album:n},u=c+"?",i)u+=o+"="+encodeURIComponent(i[o])+"&";return e.next=7,fetch(u);case 7:if(s=e.sent,!s.ok){e.next=13;break}return e.next=11,s.json();case 11:return f=e.sent,e.abrupt("return",c+"/"+f.Type+"/"+f.Id);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),console.log(e.t0);case 18:return e.abrupt("return","");case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),v.apply(this,arguments)}}.call(this,r("1c35").Buffer)},ba14:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function a(e,t){var r=Object(n["B"])("router-view");return Object(n["u"])(),Object(n["f"])(r)}r("1026");const c={};c.render=a;var i=c,u=(r("d3b7"),r("3ca3"),r("ddb0"),r("6c02")),o=Object(n["I"])("data-v-6f55ee66");Object(n["x"])("data-v-6f55ee66");var s={class:"home"},f=Object(n["h"])(" home ");Object(n["v"])();var l=o((function(e,t,r,a,c,i){return Object(n["u"])(),Object(n["f"])("div",s,[f,e.fileUrl?(Object(n["u"])(),Object(n["f"])("audio",{key:0,src:e.fileUrl,controls:"controls"}," Your browser does not support the audio element. ",8,["src"])):Object(n["g"])("",!0)])})),m=r("bc3a"),d=r.n(m),b=(r("ac1f"),r("1276"),r("466d"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),function(e,t){var r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=atob(r[1]),c=a.length,i=new Uint8Array(c);while(c--)i[c]=a.charCodeAt(c);var u=new File([i],t,{type:n});return setTimeout((function(){u=null}),0),{name:t,percentage:0,raw:u,size:u.zize,status:"ready",uid:(new Date).getTime()}}),p=function(e,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t(e.target.result)}},h=r("1da1"),g=(r("96cf"),r("b0c0"),r("dde9")),v=r("b57b"),x=r("002f"),y=r("b6cf"),w=r("fd2f"),k=r("a8ee"),O=r("e5b9");function j(e){return A.apply(this,arguments)}function A(){return A=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.name.substring(t.name.lastIndexOf(".")+1,t.name.length).toLowerCase(),n=t.name.substring(0,t.name.lastIndexOf(".")),e.t0=r,e.next="ncm"===e.t0?5:"kwm"===e.t0?9:"xm"===e.t0||"wav"===e.t0||"mp3"===e.t0||"flac"===e.t0||"m4a"===e.t0?13:"ogg"===e.t0?17:"tm0"===e.t0||"tm3"===e.t0?21:"qmc3"===e.t0||"qmc2"===e.t0||"qmc0"===e.t0||"qmcflac"===e.t0||"qmcogg"===e.t0||"tkm"===e.t0||"bkcmp3"===e.t0||"bkcflac"===e.t0||"mflac"===e.t0||"mgg"===e.t0||"666c6163"===e.t0||"6d7033"===e.t0||"6f6767"===e.t0||"6d3461"===e.t0||"776176"===e.t0?25:"tm2"===e.t0||"tm6"===e.t0?29:"vpr"===e.t0||"kgm"===e.t0||"kgma"===e.t0?33:37;break;case 5:return e.next=7,g.Decrypt(t.raw,n,r);case 7:return a=e.sent,e.abrupt("break",38);case 9:return e.next=11,v.Decrypt(t.raw,n,r);case 11:return a=e.sent,e.abrupt("break",38);case 13:return e.next=15,x.Decrypt(t.raw,n,r);case 15:return a=e.sent,e.abrupt("break",38);case 17:return e.next=19,w.Decrypt(t.raw,n,r);case 19:return a=e.sent,e.abrupt("break",38);case 21:return e.next=23,w.Decrypt(t.raw,n,"mp3");case 23:return a=e.sent,e.abrupt("break",38);case 25:return e.next=27,y.Decrypt(t.raw,n,r);case 27:return a=e.sent,e.abrupt("break",38);case 29:return e.next=31,k.Decrypt(t.raw,n);case 31:return a=e.sent,e.abrupt("break",38);case 33:return e.next=35,O.Decrypt(t.raw,n,r);case 35:return a=e.sent,e.abrupt("break",38);case 37:a={status:!1,message:"不支持此文件格式"};case 38:return a.rawExt||(a.rawExt=r),a.rawFilename||(a.rawFilename=n),console.log(a),e.abrupt("return",a);case 42:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function R(e,t){return M.apply(this,arguments)}function M(){return M=Object(h["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=b(t,r),e.abrupt("return",j(n));case 2:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}var U=Object(n["j"])({data:function(){return{fileUrl:""}},mounted:function(){var e=this;d.a.get("/宇多田光 (宇多田ヒカル) - First Love.mflac",{responseType:"blob"}).then((function(t){console.log(t.data),p(t.data,(function(t){R(t,"宇多田光 (宇多田ヒカル) - First Love.mflac").then((function(t){e.fileUrl=t.file}))}))}))}});r("93f8");U.render=l,U.__scopeId="data-v-6f55ee66";var B=U,L=[{path:"/",name:"Home",component:B},{path:"/musicList",name:"musicList",component:function(){return r.e("musicList").then(r.bind(null,"383c"))}}],T=Object(u["a"])({history:Object(u["b"])(),routes:L}),D=T,E=r("5502"),C=Object(E["a"])({state:{},mutations:{},actions:{},modules:{}}),P=(r("499a"),r("3a34")),S=r.n(P),F=new S.a;console.log(F),Object(n["e"])(i).use(C).use(D).mount("#app")},dde9:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"Decrypt",(function(){return d}));var n=r("1da1"),a=(r("96cf"),r("d81d"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fb6a"),r("ddb0"),r("25f0"),r("ac1f"),r("5319"),r("159b"),r("a15b"),r("3ca3"),r("2b3d"),r("ef21")),c=r.n(a),i=r("06dc"),u=r("3452"),o=r("b686"),s=u.enc.Hex.parse("687a4852416d736f356b496e62617857"),f=u.enc.Hex.parse("2331346C6A6B5F215C5D2630553C2728"),l=[67,84,69,78,70,68,65,77],m=r("cb96");function d(e,t,r){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function t(r,n,a){var u,s,f,d,b,v,x,y,w,k,O,j,A,R,M,U,B,L,T,D;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["d"])(r);case 2:if(u=t.sent,s=new DataView(u),Object(i["i"])(l,new Uint8Array(u,0,8))){t.next=6;break}return t.abrupt("return",{status:!1,message:"此ncm文件已损坏"});case 6:for(f=p(s,u,10),d=h(f.data),b=g(s,u,f.offset),v=b.data,x=b.offset+s.getUint32(b.offset+5,!0)+13,y=new Uint8Array(u,x),w=y.length,k=0;k<w;++k)y[k]^=d[255&k];return void 0===v.album&&(v.album=""),O=[],v.artist&&v.artist.forEach((function(e){return O.push(e[0])})),j=Object(i["e"])(O.join("; "),v.musicName,n),0===O.length&&O.push(j.artist),void 0===v.format&&(v.format=Object(i["b"])(y,"mp3")),console.log(v),t.next=23,Object(i["g"])(v.albumPic);case 23:A=t.sent;case 24:if(!(A.buffer&&A.buffer.byteLength>=16777216)){t.next=35;break}return t.next=27,c.a.read(A.buffer);case 27:return R=t.sent,t.next=30,R.resize(Math.round(R.getHeight()/2),c.a.AUTO);case 30:return t.next=32,R.getBufferAsync("image/jpeg");case 32:A.buffer=t.sent,t.next=24;break;case 35:return console.log(A),M=i["a"][v.format],t.prev=37,U=new Blob([y],{type:M}),t.next=41,m.parseBlob(U);case 41:if(B=t.sent,console.log(B),L=!B.common.album&&!B.common.artists&&!B.common.title,"mp3"!==v.format){t.next=50;break}return t.next=47,Object(i["k"])(y,O,j.title,v.album,A.buffer,v.albumPic,L?null:B);case 47:y=t.sent,t.next=51;break;case 50:"flac"===v.format&&(T=new o(e.from(y)),L&&(T.setTag("TITLE="+j.title),T.setTag("ALBUM="+v.album),T.removeTag("ARTIST"),O.forEach((function(e){return T.setTag("ARTIST="+e)}))),T.importPictureFromBuffer(e.from(A.buffer)),y=T.save());case 51:t.next=56;break;case 53:t.prev=53,t.t0=t["catch"](37),console.warn("Error while appending cover image to file "+t.t0);case 56:return D=new Blob([y],{type:M}),t.abrupt("return",{status:!0,title:j.title,artist:j.artist,ext:v.format,album:v.album,picture:A.url,file:URL.createObjectURL(D),mime:M});case 58:case"end":return t.stop()}}),t,null,[[37,53]])}))),b.apply(this,arguments)}function p(e,t,r){var n=e.getUint32(r,!0);r+=4;var a=new Uint8Array(t,r,n).map((function(e){return 100^e}));r+=n;for(var c=u.AES.decrypt({ciphertext:u.lib.WordArray.create(a)},s,{mode:u.mode.ECB,padding:u.pad.Pkcs7}),i=new Uint8Array(c.sigBytes),o=c.words,f=c.sigBytes,l=0;l<f;l++)i[l]=o[l>>>2]>>>24-l%4*8&255;return{offset:r,data:i.slice(17)}}function h(e){for(var t=new Uint8Array(Array(256).keys()),r=e.length,n=0,a=0;a<256;a++){n=t[a]+n+e[a%r]&255;var c=[t[n],t[a]];t[a]=c[0],t[n]=c[1]}return t.map((function(e,t,r){t=t+1&255;var n=r[t],a=r[t+n&255];return r[n+a&255]}))}function g(e,t,r){var n=e.getUint32(r,!0);if(r+=4,0===n)return{data:{},offset:r};var a=new Uint8Array(t,r,n).map((function(e){return 99^e}));r+=n;var c=u.AES.decrypt({ciphertext:u.enc.Base64.parse(u.lib.WordArray.create(a.slice(22)).toString(u.enc.Utf8))},f,{mode:u.mode.ECB,padding:u.pad.Pkcs7}).toString(u.enc.Utf8),i=c.indexOf(":"),o=JSON.parse(c.slice(i+1));return"dj"===c.slice(0,i)&&(o=o.mainMusic),o.albumPic&&""!==o.albumPic&&(o.albumPic=o.albumPic.replace("http://","https://")+"?param=500y500"),{data:o,offset:r}}}.call(this,r("1c35").Buffer)},e5b9:function(e,t,r){"use strict";r.r(t),r.d(t,"Decrypt",(function(){return s}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("fb6a"),r("3ca3"),r("ddb0"),r("2b3d"),r("06dc")),c=r("cb96"),i=[5,40,188,150,233,228,90,67,145,170,189,208,122,245,54,49],u=[124,213,50,235,134,2,127,75,168,175,166,142,15,255,153,20],o=[37,223,232,166,117,30,117,14,47,128,243,45,184,182,227,17,0];function s(e,t,r){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var s,f,b,p,h,g,v,x,y,w,k,O,j,A,R,M;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"file:"!==window.location.protocol){e.next=3;break}return e.abrupt("return",{status:!1,message:"请使用<a target='_blank' href='https://github.com/ix64/unlock-music/wiki/其他音乐格式工具'>CLI版本</a>进行解锁"});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e["catch"](0);case 7:return e.t1=Uint8Array,e.next=10,Object(a["d"])(t);case 10:if(e.t2=e.sent,s=new e.t1(e.t2),"vpr"!==n){e.next=17;break}if(Object(a["i"])(i,s.slice(0,16))){e.next=15;break}return e.abrupt("return",{status:!1,message:"Not a valid vpr file!"});case 15:e.next=19;break;case 17:if(Object(a["i"])(u,s.slice(0,16))){e.next=19;break}return e.abrupt("return",{status:!1,message:"Not a valid kgm/kgma file!"});case 19:if(f=new DataView(s.slice(16,20).buffer),b=f.getUint32(0,!0),p=s.slice(b),h=p.length,!(p.byteLength>1<<26)){e.next=25;break}return e.abrupt("return",{status:!1,message:"文件过大，请使用<a target='_blank' href='https://github.com/ix64/unlock-music/wiki/其他音乐格式工具'>CLI版本</a>进行解锁"});case 25:if(g=new Uint8Array(17),g.set(s.slice(28,44),0),null!=m){e.next=32;break}return e.next=30,d();case 30:if(e.sent){e.next=32;break}return e.abrupt("return",{status:!1,message:"加载Kgm/Vpr Mask数据失败"});case 32:for(v=0;v<h;v++)x=g[v%17]^p[v],x^=(15&x)<<4,y=l(v),y^=(15&y)<<4,p[v]=x^y;if("vpr"===n)for(w=0;w<h;w++)p[w]^=o[w%17];return k=Object(a["b"])(p,"mp3"),O=a["a"][k],j=new Blob([p],{type:O}),e.next=39,c.parseBlob(j);case 39:return A=e.sent,R=Object(a["e"])(A.common.artist,A.common.title,r),M=Object(a["f"])(A),e.abrupt("return",{status:!0,title:R.title,artist:R.artist,ext:k,album:A.common.album,picture:M,file:URL.createObjectURL(j),mime:O});case 43:case"end":return e.stop()}}),e,null,[[0,5]])}))),f.apply(this,arguments)}function l(e){return p[e%272]^m[e>>4]}var m=null;function d(){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("./static/kgm.mask",{method:"GET"});case 3:return t=e.sent,e.t0=Uint8Array,e.next=7,t.arrayBuffer();case 7:return e.t1=e.sent,m=new e.t0(e.t1),e.abrupt("return",!0);case 12:return e.prev=12,e.t2=e["catch"](0),console.error(e.t2),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),b.apply(this,arguments)}var p=[184,213,61,178,233,175,120,140,131,51,113,81,118,160,205,55,47,62,53,141,169,190,152,183,231,140,34,206,90,97,223,104,105,137,254,165,182,222,169,119,252,200,189,189,229,109,62,90,54,239,105,78,190,225,233,102,28,243,217,2,182,242,18,155,68,208,111,185,53,137,182,70,109,115,130,6,105,193,237,215,133,194,48,223,162,98,190,121,45,98,98,61,13,126,190,72,137,35,2,160,228,213,117,81,50,2,83,253,22,58,33,59,22,15,195,178,187,179,226,186,58,61,19,236,246,1,69,132,165,112,15,147,73,12,100,205,49,213,204,76,7,1,158,0,26,35,144,191,136,30,59,171,166,62,196,115,71,16,126,59,94,188,227,0,132,255,9,212,224,137,15,91,88,112,79,251,101,216,92,83,27,211,200,198,191,239,152,176,80,79,15,234,229,131,88,140,40,44,132,103,205,208,158,71,219,39,80,202,244,99,99,232,151,127,27,75,12,194,193,33,76,204,88,245,148,82,163,243,211,224,104,244,0,35,243,94,10,123,147,221,171,18,178,19,232,132,215,167,159,15,50,76,85,29,4,54,82,220,3,243,249,78,66,233,61,97,239,124,182,179,147,80]},fd2f:function(e,t,r){"use strict";r.r(t),r.d(t,"Decrypt",(function(){return i}));var n=r("1da1"),a=(r("96cf"),r("d3b7"),r("5cc6"),r("9a8c"),r("a975"),r("735e"),r("c1ac"),r("d139"),r("3a7b"),r("d5d6"),r("82f8"),r("e91f"),r("60bd"),r("5f96"),r("3280"),r("3fcc"),r("ca91"),r("25a1"),r("cd26"),r("3c5d"),r("2954"),r("649e"),r("219c"),r("170b"),r("b39a"),r("72f7"),r("3ca3"),r("ddb0"),r("2b3d"),r("06dc")),c=r("cb96");function i(e,t,r){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){var i,u,o,s,f,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=!(l.length>3&&void 0!==l[3])||l[3],u=n,!i){e.next=10;break}return e.t0=Uint8Array,e.next=6,Object(a["d"])(t);case 6:e.t1=e.sent,o=new e.t0(e.t1),u=Object(a["b"])(o,n),u!==n&&(t=new Blob([o],{type:a["a"][u]}));case 10:return e.next=12,c.parseBlob(t);case 12:return s=e.sent,f=Object(a["e"])(s.common.artist,s.common.title,r),e.abrupt("return",{status:!0,title:f.title,artist:f.artist,ext:u,album:s.common.album,picture:Object(a["f"])(s),file:URL.createObjectURL(t),mime:a["a"][u]});case 15:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}}});